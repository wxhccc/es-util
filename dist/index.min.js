/*!
  * @wxhccc/es-util v1.2.0
  * (c) 2021 wxhccc
  * @license MIT
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Smartfetch={})}(this,(function(e){"use strict";const{hasOwnProperty:t}=Object.prototype;function n(e,t=[]){return{[e]:t}}const r=/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i;const{hasOwnProperty:i,toString:c}=Object.prototype;async function s(e){try{return[null,await e]}catch(e){return[e,void 0]}}const a={};e.ChinaIdCardValid=function(e){const t=e.toString().toUpperCase();return r.test(t)&&["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"].includes(t.substr(0,2))&&(()=>{if(18===t.length){const e=t.split(""),n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=[1,0,"X",9,8,7,6,5,4,3,2];let i=0,c=0,s=0;for(let t=0;t<17;t++)c=parseInt(e[t]),s=n[t],i+=c*s;return r[i%11].toString()===e[17]}return!0})()},e.array2tree=function(e,r={}){const{primaryKey:i,parentKey:c,childrenKey:s,createRoot:a,parentRefKey:o}=Object.assign({primaryKey:"id",parentKey:"pid",childrenKey:"children",createRoot:!1,parentRefKey:!1},r),u=o&&("string"==typeof o?o:"_parent");let l={},p=[];return Array.isArray(e)&&e.forEach((e=>{!t.call(l,e[i])&&(l[e[i]]=Object.assign({},e,n(s))),t.call(l,e[c])&&l[e[c]][s].push(Object.assign(l[e[i]],u?{[u]:l[e[c]]}:{})),!e[c]&&p.push(l[e[i]])})),"function"==typeof a?a(p):a?{[s]:p}:p},e.awaitWrapper=s,e.byteParse=function(e,t={}){},e.byteStringify=function(e,t){const n=Object.assign({standard:"jedec",unitLvl:"auto",precision:1,detail:!1},t),{standard:r,unitLvl:i,precision:c,detail:s}=n;let a=parseFloat(e);if(!Number.isFinite(a))return;const o=a<0?-1:1;a=Math.abs(a);const{base:u,unitMap:l}=((e,t)=>{const n={B:{expMax:0,units:{metric:"B",iec:"B",jedec:"B"}},K:{expMax:1,units:{metric:"kB",iec:"KiB",jedec:"KB"}},M:{expMax:2,units:{metric:"MB",iec:"MiB",jedec:"MB"}},G:{expMax:3,units:{metric:"GB",iec:"GiB",jedec:"GB"}},T:{expMax:4,units:{metric:"TB",iec:"TiB",jedec:"TB"}},P:{expMax:5,units:{metric:"PB",iec:"PiB",jedec:"PB"}},E:{expMax:6,units:{metric:"EB",iec:"EiB",jedec:"EB"}},Z:{expMax:7,units:{metric:"ZB",iec:"ZiB",jedec:"ZB"}},Y:{expMax:8,units:{metric:"YB",iec:"YiB",jedec:"YB"}}},r={metric:1e3,iec:1024,jedec:1024};return{base:r[e]||r.jedec,unitMap:n[t]||Object.values(n)}})(r,i),p=e=>Number.isInteger(e)?e:e.toFixed(c);let f="",y=0;if(Array.isArray(l))l.some((e=>{const t=Math.pow(u,e.expMax),n=a/t;return!(n>u)&&(f=e.units[r],y=p(n*o),!0)}));else{const e=Math.pow(u,l.expMax);f=l.units[r];y=p(a/e*o)}return s?{value:y,unit:f}:`${y} ${f}`},e.checkoutBy=function(e,t,n){return e instanceof Object?Array.isArray(t)?t.map((t=>e[t])):t&&t instanceof Object?Object.keys(t).map((r=>e[r]instanceof Object&&t[r]instanceof Object?n?n({},e[r],t[r]):Object.assign({},e[r],t[r]):t[r]||e[r])):Object.values(e):[]},e.formulaValidate=function(e,t){return e=e.replace(/\s/g,""),!/[+\-*/]{2,}/.test(e)&&!/\(\)/.test(e)&&!/\([+\-*/]/.test(e)&&!/[+\-*/]\)/.test(e)&&!/[^+\-*/]\(/.test(e)&&!/\)[^+\-*/]/.test(e)&&(()=>{let t=[];for(let n,r=0;r<e.length;r++)if(n=e.charAt(r),"("===n)t.push("(");else if(")"===n){if(!(t.length>0))return!1;t.pop()}return!t.length})()&&(!Array.isArray(t)||(n=t,e.replace(/[()+\-*/]{1,}/g,"`").split("`").every((e=>!/[A-Z]/i.test(e)||n.includes(e)))));var n},e.mapToObject=function(e,t="key",n="value"){let r={};return Array.isArray(e)&&t&&n&&[t,n].every((e=>["string","function"].includes(typeof e)))&&e.forEach(((e,i)=>{const c="string"==typeof t?e[t]:t(e,i),s="string"==typeof n?e[n]:n(e,i);["string","number"].includes(typeof c)&&(r[c]=s)})),r},e.objType=e=>{const t=c.call(e).match(/^\[object (.*)\]$/);return t?t[1]:""},e.pickRenameKeys=function(e,t){if(!(e&&e instanceof Object&&t&&t instanceof Object))return;let n={};for(let r in e)r in t&&(n[t[r]]=e[r]);return n},e.tree2array=function(e,t={}){const{primaryKey:r,parentKey:i,childrenKey:c,hasParentKey:s,returnObject:a}=Object.assign({hasParentKey:!0,primaryKey:"id",parentKey:"pid",childrenKey:"children",returnObject:!1},t);let o=a?{}:[];return Array.isArray(e)||"object"==typeof e?(function e(t,n,u=!1){let l=s?{}:{[i]:n};if(!u){const e=Object.assign(l,function(e,t){let n={};for(let r in e)r!==t&&(n[r]=e[r]);return n}(t,c));a?o[t[r]]=e:o.push(e)}Array.isArray(t[c])&&t[c].length&&t[c].forEach((n=>e(n,t[r])))}(Array.isArray(e)?n(c,e):e,null,!0),o):o},e.wpl=function(e,t){const n=function(e){return e?e._isVue||e.$&&e.$.vnode?"vue":"setState"in e?"react":"unknown":"unknown"}(this),r="unknown"!==n,o=r?this:a,u=r?"react"===n?"state":"":"$_ES_UTILS_KEYS",l=u?o[u]:o,p=e=>"[object Object]"===c.call(e),f=(e,t,r)=>{if("vue"===n&&o.$set&&(c=e,s=t[0],!i.call(c,s)))return;var c,s;const{$set:a=((e,t,n)=>{e[t]=n})}=o,u="react"===n,l=u?{...e}:e;let f=l,y=!1;for(let e=0;e<t.length;e++){const n=t[e],c=i.call(f,n);if(e===t.length-1){const e="boolean"==typeof f[n];y=!c||e,y&&a(f,n,r)}else{if(!c&&a(f,n,{}),!p(f[n]))break;u&&(f[n]={...f[n]}),f=f[n]}}u&&y&&o.setState({[t[0]]:l[t[0]]})},y=e=>{if(j.length)return f(l,j,e);b&&(b[0][b[1]]=e),d&&d(e)};let d,b,j=[];const h=Object.assign(e,{lock:(e,t)=>{const n=e=>Array.isArray(e)&&2===e.length;return"string"==typeof e?j=e.split("."):n(e)?b=e:"function"==typeof e&&(d=e,n(t)&&(b=t)),h}});return y(!0),h.finally((()=>y(!1))),t?h:s(h)},Object.defineProperty(e,"__esModule",{value:!0})}));
