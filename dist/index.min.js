!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Smartfetch={})}(this,(function(e){"use strict";const{hasOwnProperty:t}=Object.prototype;function r(e,t=[]){return{[e]:t}}const n=/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i;e.ChinaIdCardValid=function(e){const t=e.toString().toUpperCase();return n.test(t)&&["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"].includes(t.substr(0,2))&&(()=>{if(18===t.length){const e=t.split(""),r=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=[1,0,"X",9,8,7,6,5,4,3,2];let i=0,c=0,a=0;for(let t=0;t<17;t++)c=parseInt(e[t]),a=r[t],i+=c*a;return n[i%11].toString()===e[17]}return!0})()},e.array2tree=function(e,n={}){const{primaryKey:i,parentKey:c,childrenKey:a,createRoot:s,parentRefKey:o}=Object.assign({primaryKey:"id",parentKey:"pid",childrenKey:"children",createRoot:!1,parentRefKey:!1},n),u=o&&("string"==typeof o?o:"_parent");let p={},l=[];return Array.isArray(e)&&e.forEach((e=>{!t.call(p,e[i])&&(p[e[i]]=Object.assign({},e,r(a))),t.call(p,e[c])&&p[e[c]][a].push(Object.assign(p[e[i]],u?{[u]:p[e[c]]}:{})),!e[c]&&l.push(p[e[i]])})),"function"==typeof s?s(l):s?{[a]:l}:l},e.awaitWrapper=async function(e){try{return[null,await e]}catch(e){return[e,void 0]}},e.byteParse=function(e,t={}){},e.byteStringify=function(e,t){const r=Object.assign({standard:"jedec",unitLvl:"auto",precision:1,detail:!1},t),{standard:n,unitLvl:i,precision:c,detail:a}=r;let s=parseFloat(e);if(!Number.isFinite(s))return;const o=s<0?-1:1;s=Math.abs(s);const{base:u,unitMap:p}=((e,t)=>{const r={B:{expMax:0,units:{metric:"B",iec:"B",jedec:"B"}},K:{expMax:1,units:{metric:"kB",iec:"KiB",jedec:"KB"}},M:{expMax:2,units:{metric:"MB",iec:"MiB",jedec:"MB"}},G:{expMax:3,units:{metric:"GB",iec:"GiB",jedec:"GB"}},T:{expMax:4,units:{metric:"TB",iec:"TiB",jedec:"TB"}},P:{expMax:5,units:{metric:"PB",iec:"PiB",jedec:"PB"}},E:{expMax:6,units:{metric:"EB",iec:"EiB",jedec:"EB"}},Z:{expMax:7,units:{metric:"ZB",iec:"ZiB",jedec:"ZB"}},Y:{expMax:8,units:{metric:"YB",iec:"YiB",jedec:"YB"}}},n={metric:1e3,iec:1024,jedec:1024};return{base:n[e]||n.jedec,unitMap:r[t]||Object.values(r)}})(n,i),l=e=>Number.isInteger(e)?e:e.toFixed(c);let y="",f=0;if(Array.isArray(p))p.some((e=>{const t=Math.pow(u,e.expMax),r=s/t;return!(r>u)&&(y=e.units[n],f=l(r*o),!0)}));else{const e=Math.pow(u,p.expMax);y=p.units[n];f=l(s/e*o)}return a?{value:f,unit:y}:`${f} ${y}`},e.checkoutBy=function(e,t,r){return e instanceof Object?Array.isArray(t)?t.map((t=>e[t])):t&&t instanceof Object?Object.keys(t).map((n=>e[n]instanceof Object&&t[n]instanceof Object?r?r({},e[n],t[n]):Object.assign({},e[n],t[n]):t[n]||e[n])):Object.values(e):[]},e.formulaValidate=function(e,t){return e=e.replace(/\s/g,""),!/[+\-*/]{2,}/.test(e)&&!/\(\)/.test(e)&&!/\([+\-*/]/.test(e)&&!/[+\-*/]\)/.test(e)&&!/[^+\-*/]\(/.test(e)&&!/\)[^+\-*/]/.test(e)&&(()=>{let t=[];for(let r,n=0;n<e.length;n++)if(r=e.charAt(n),"("===r)t.push("(");else if(")"===r){if(!(t.length>0))return!1;t.pop()}return!t.length})()&&(!Array.isArray(t)||(r=t,e.replace(/[()+\-*/]{1,}/g,"`").split("`").every((e=>!/[A-Z]/i.test(e)||r.includes(e)))));var r},e.mapToObject=function(e,t="key",r="value"){let n={};return Array.isArray(e)&&t&&r&&[t,r].every((e=>["string","function"].includes(typeof e)))&&e.forEach(((e,i)=>{const c="string"==typeof t?e[t]:t(e,i),a="string"==typeof r?e[r]:r(e,i);["string","number"].includes(typeof c)&&(n[c]=a)})),n},e.pickRenameKeys=function(e,t){if(!(e&&e instanceof Object&&t&&t instanceof Object))return;let r={};for(let n in e)n in t&&(r[t[n]]=e[n]);return r},e.tree2array=function(e,t={}){const{primaryKey:n,parentKey:i,childrenKey:c,hasParentKey:a,returnObject:s}=Object.assign({hasParentKey:!0,primaryKey:"id",parentKey:"pid",childrenKey:"children",returnObject:!1},t);let o=s?{}:[];return Array.isArray(e)||"object"==typeof e?(function e(t,r,u=!1){let p=a?{}:{[i]:r};if(!u){const e=Object.assign(p,function(e,t){let r={};for(let n in e)n!==t&&(r[n]=e[n]);return r}(t,c));s?o[t[n]]=e:o.push(e)}Array.isArray(t[c])&&t[c].length&&t[c].forEach((r=>e(r,t[n])))}(Array.isArray(e)?r(c,e):e,null,!0),o):o},Object.defineProperty(e,"__esModule",{value:!0})}));
