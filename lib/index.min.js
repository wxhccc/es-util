!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).EsUtil={})}(this,function(e){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var y=Object.prototype.hasOwnProperty;function d(e){return p({},e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:[])}var r=/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i;e.array2tree=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=Object.assign({primaryKey:"id",parentKey:"pid",childrenKey:"children",createRoot:!1},r),n=t.primaryKey,i=t.parentKey,o=t.childrenKey,a=t.createRoot,u={},c=[];return Array.isArray(e)&&e.forEach(function(e){!y.call(u,e[n])&&(u[e[n]]=Object.assign(d(o),e)),y.call(u,e[i])&&u[e[i]][o].push(u[e[n]]),!e[i]&&c.push(u[e[n]])}),"function"==typeof a?a(c):a?p({},o,c):c},e.tree2array=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=Object.assign({hasParentKey:!0,primaryKey:"id",parentKey:"pid",childrenKey:"children",returnObject:!1},r),a=t.primaryKey,u=t.parentKey,c=t.childrenKey,y=t.hasParentKey,f=t.returnObject,s=f?{}:[];return(Array.isArray(e)||"object"===l(e))&&function r(t,e,n){var i=y?{}:p({},u,e);if(!n){var o=Object.assign(i,function(e,r){var t={};for(var n in e)n!==r&&(t[n]=e[n]);return t}(t,c));f?s[t[a]]=o:s.push(o)}Array.isArray(t[c])&&t[c].length&&t[c].forEach(function(e){return r(e,t[a])})}(Array.isArray(e)?d(c,e):e,null,!0),s},e.ChinaIdCardValid=function(e){var i=e.toString().toUpperCase();return r.test(i)&&["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"].includes(i.substr(0,2))&&function(){if(18!==i.length)return!0;for(var e=i.split(""),r=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],t=0,n=0;n<17;n++)t+=e[n]*r[n];return[1,0,"X",9,8,7,6,5,4,3,2][t%11].toString()===e[17]}()},e.formulaValidate=function(n,e){var r;return n=n.replace(/\s/g,""),!/[+\-*/]{2,}/.test(n)&&!/\(\)/.test(n)&&!/\([+\-*/]/.test(n)&&!/[+\-*/]\)/.test(n)&&!/[^+\-*/]\(/.test(n)&&!/\)[^+\-*/]/.test(n)&&function(){for(var e,r=[],t=0;t<n.length;t++)if("("===(e=n.charAt(t)))r.push("(");else if(")"===e){if(!(0<r.length))return!1;r.pop()}return!r.length}()&&(!Array.isArray(e)||(r=e,n.replace(/[()+\-*/]{1,}/g,"`").split("`").every(function(e){return!/[A-Z]/i.test(e)||r.includes(e)})))},e.mapToObject=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"key",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"value",o={};return Array.isArray(e)&&n&&i&&[n,i].every(function(e){return["string","function"].includes(l(e))})&&e.forEach(function(e){var r="string"==typeof n?e[n]:n(e),t="string"==typeof i?e[i]:i(e);r&&["string","number"].includes(l(r))&&(o[r]=t)}),o},Object.defineProperty(e,"__esModule",{value:!0})});
