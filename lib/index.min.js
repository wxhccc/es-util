!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).EsUtil={})}(this,function(e){"use strict";var y=Object.prototype.hasOwnProperty;function d(e,t){var r;return void 0===t&&(t=[]),(r={})[e]=t,r}var t=/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i;var r=/[-_](\w)/g;var n=/\B([A-Z])/g;e.array2tree=function(e,t){var r;void 0===t&&(t={});var n=Object.assign({primaryKey:"id",parentKey:"pid",childrenKey:"children",createRoot:!1,parentRefKey:!1},t),i=n.primaryKey,a=n.parentKey,c=n.childrenKey,s=n.createRoot,u=n.parentRefKey,o=u&&("string"==typeof u?u:"_parent"),f={},p=[];return Array.isArray(e)&&e.forEach(function(e){var t;y.call(f,e[i])||(f[e[i]]=Object.assign({},e,d(c))),y.call(f,e[a])&&f[e[a]][c].push(Object.assign(f[e[i]],o?((t={})[o]=f[e[a]],t):{})),e[a]||p.push(f[e[i]])}),"function"==typeof s?s(p):s?((r={})[c]=p,r):p},e.tree2array=function(e,t){void 0===t&&(t={});var r=Object.assign({hasParentKey:!0,primaryKey:"id",parentKey:"pid",childrenKey:"children",returnObject:!1},t),s=r.primaryKey,u=r.parentKey,o=r.childrenKey,f=r.hasParentKey,p=r.returnObject,y=p?{}:[];return(Array.isArray(e)||"object"==typeof e)&&function t(r,e,n){var i;void 0===n&&(n=!1);var a=f?{}:((i={})[u]=e,i);if(!n){var c=Object.assign(a,function(e,t){var r={};for(var n in e)n!==t&&(r[n]=e[n]);return r}(r,o));p?y[r[s]]=c:y.push(c)}Array.isArray(r[o])&&r[o].length&&r[o].forEach(function(e){return t(e,r[s])})}(Array.isArray(e)?d(o,e):e,null,!0),y},e.ChinaIdCardValid=function(e){var i=e.toString().toUpperCase();return t.test(i)&&["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"].includes(i.substr(0,2))&&function(){if(18!==i.length)return!0;for(var e=i.split(""),t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=0,n=0;n<17;n++)r+=parseInt(e[n])*t[n];return[1,0,"X",9,8,7,6,5,4,3,2][r%11].toString()===e[17]}()},e.formulaValidate=function(n,e){var t;return n=n.replace(/\s/g,""),!/[+\-*/]{2,}/.test(n)&&!/\(\)/.test(n)&&!/\([+\-*/]/.test(n)&&!/[+\-*/]\)/.test(n)&&!/[^+\-*/]\(/.test(n)&&!/\)[^+\-*/]/.test(n)&&function(){for(var e=[],t=0,r=void 0;t<n.length;t++)if("("===(r=n.charAt(t)))e.push("(");else if(")"===r){if(!(0<e.length))return!1;e.pop()}return!e.length}()&&(!Array.isArray(e)||(t=e,n.replace(/[()+\-*/]{1,}/g,"`").split("`").every(function(e){return!/[A-Z]/i.test(e)||t.includes(e)})))},e.mapToObject=function(e,i,a){void 0===i&&(i="key"),void 0===a&&(a="value");var c={};return Array.isArray(e)&&i&&a&&[i,a].every(function(e){return["string","function"].includes(typeof e)})&&e.forEach(function(e,t){var r="string"==typeof i?e[i]:i(e,t),n="string"==typeof a?e[a]:a(e,t);["string","number"].includes(typeof r)&&(c[r]=n)}),c},e.checkoutBy=function(t,r,n){return t instanceof Object?Array.isArray(r)?r.map(function(e){return t[e]}):r&&r instanceof Object?Object.keys(r).map(function(e){return t[e]instanceof Object&&r[e]instanceof Object?n?n({},t[e],r[e]):Object.assign({},t[e],r[e]):r[e]||t[e]}):Object.values(t):[]},e.pickRenameKeys=function(e,t){if(e&&e instanceof Object&&t&&t instanceof Object){var r={};for(var n in e)n in t&&(r[t[n]]=e[n]);return r}},e.byteStringify=function(e,t){var r=Object.assign({standard:"jedec",unitLvl:"auto",precision:1,detail:!1},t),n=r.standard,i=r.unitLvl,a=r.precision,c=r.detail,s=parseFloat(e);if(Number.isFinite(s)){var u=s<0?-1:1;s=Math.abs(s);var o,f,p={base:(f={metric:1e3,iec:1024,jedec:1024})[n]||f.jedec,unitMap:(o={B:{expMax:0,units:{metric:"B",iec:"B",jedec:"B"}},K:{expMax:1,units:{metric:"kB",iec:"KiB",jedec:"KB"}},M:{expMax:2,units:{metric:"MB",iec:"MiB",jedec:"MB"}},G:{expMax:3,units:{metric:"GB",iec:"GiB",jedec:"GB"}},T:{expMax:4,units:{metric:"TB",iec:"TiB",jedec:"TB"}},P:{expMax:5,units:{metric:"PB",iec:"PiB",jedec:"PB"}},E:{expMax:6,units:{metric:"EB",iec:"EiB",jedec:"EB"}},Z:{expMax:7,units:{metric:"ZB",iec:"ZiB",jedec:"ZB"}},Y:{expMax:8,units:{metric:"YB",iec:"YiB",jedec:"YB"}}})[i]||Object.values(o)},y=p.base,d=p.unitMap,l=function(e){return Number.isInteger(e)?e:e.toFixed(a)},v="",j=0;if(Array.isArray(d))d.some(function(e){var t=Math.pow(y,e.expMax),r=s/t;return!(y<r)&&(v=e.units[n],j=l(r*u),!0)});else{var b=Math.pow(y,d.expMax);v=d.units[n],j=l(s/b*u)}return c?{value:j,unit:v}:j+" "+v}},e.byteParse=function(e,t){void 0===t&&(t={})},e.camelize=function(e){return e.replace(r,function(e,t){return t?t.toUpperCase():""})},e.hyphenate=function(e){return e.replace(n,"-$1").toLowerCase()},e.camel2snake=function(e){return e.replace(n,"_$1").toLowerCase()},Object.defineProperty(e,"__esModule",{value:!0})});
