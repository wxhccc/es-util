!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).EsUtil={})}(this,function(e){"use strict";function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=Object.prototype.hasOwnProperty;function d(e){return l({},e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:[])}var t=/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i;e.array2tree=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({primaryKey:"id",parentKey:"pid",childrenKey:"children",createRoot:!1},t),n=r.primaryKey,i=r.parentKey,a=r.childrenKey,c=r.createRoot,o={},u=[];return Array.isArray(e)&&e.forEach(function(e){!s.call(o,e[n])&&(o[e[n]]=Object.assign(d(a),e)),s.call(o,e[i])&&o[e[i]][a].push(o[e[n]]),!e[i]&&u.push(o[e[n]])}),"function"==typeof c?c(u):c?l({},a,u):u},e.tree2array=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({hasParentKey:!0,primaryKey:"id",parentKey:"pid",childrenKey:"children",returnObject:!1},t),c=r.primaryKey,o=r.parentKey,u=r.childrenKey,s=r.hasParentKey,f=r.returnObject,y=f?{}:[];return(Array.isArray(e)||"object"===p(e))&&function t(r,e,n){var i=s?{}:l({},o,e);if(!n){var a=Object.assign(i,function(e,t){var r={};for(var n in e)n!==t&&(r[n]=e[n]);return r}(r,u));f?y[r[c]]=a:y.push(a)}Array.isArray(r[u])&&r[u].length&&r[u].forEach(function(e){return t(e,r[c])})}(Array.isArray(e)?d(u,e):e,null,!0),y},e.ChinaIdCardValid=function(e){var i=e.toString().toUpperCase();return t.test(i)&&["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"].includes(i.substr(0,2))&&function(){if(18!==i.length)return!0;for(var e=i.split(""),t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=0,n=0;n<17;n++)r+=e[n]*t[n];return[1,0,"X",9,8,7,6,5,4,3,2][r%11].toString()===e[17]}()},e.formulaValidate=function(n,e){var t;return n=n.replace(/\s/g,""),!/[+\-*/]{2,}/.test(n)&&!/\(\)/.test(n)&&!/\([+\-*/]/.test(n)&&!/[+\-*/]\)/.test(n)&&!/[^+\-*/]\(/.test(n)&&!/\)[^+\-*/]/.test(n)&&function(){for(var e,t=[],r=0;r<n.length;r++)if("("===(e=n.charAt(r)))t.push("(");else if(")"===e){if(!(0<t.length))return!1;t.pop()}return!t.length}()&&(!Array.isArray(e)||(t=e,n.replace(/[()+\-*/]{1,}/g,"`").split("`").every(function(e){return!/[A-Z]/i.test(e)||t.includes(e)})))},e.mapToObject=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"key",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"value",a={};return Array.isArray(e)&&n&&i&&[n,i].every(function(e){return["string","function"].includes(p(e))})&&e.forEach(function(e){var t="string"==typeof n?e[n]:n(e),r="string"==typeof i?e[i]:i(e);t&&["string","number"].includes(p(t))&&(a[t]=r)}),a},e.byteStringify=function(n,e){var t=Object.assign({standard:"jedec",unitLvl:"auto",precision:1,detail:!1},e||{}),i=t.standard,r=t.unitLvl,a=t.precision,c=t.detail;if(n=parseFloat(n),Number.isFinite(n)){var o=n<0?-1:1;n=Math.abs(n);var u,s,f={base:(s={metric:1e3,iec:1024,jedec:1024})[i]||s.jedec,unitMap:(u={B:{expMax:0,units:{metric:"B",iec:"B",jedec:"B"}},K:{expMax:1,units:{metric:"kB",iec:"KiB",jedec:"KB"}},M:{expMax:2,units:{metric:"MB",iec:"MiB",jedec:"MB"}},G:{expMax:3,units:{metric:"GB",iec:"GiB",jedec:"GB"}},T:{expMax:4,units:{metric:"TB",iec:"TiB",jedec:"TB"}},P:{expMax:5,units:{metric:"PB",iec:"PiB",jedec:"PB"}},E:{expMax:6,units:{metric:"EB",iec:"EiB",jedec:"EB"}},Z:{expMax:7,units:{metric:"ZB",iec:"ZiB",jedec:"ZB"}},Y:{expMax:8,units:{metric:"YB",iec:"YiB",jedec:"YB"}}})[r]||Object.values(u)},y=f.base,p=f.unitMap,l=function(e){return Number.isInteger(e)?e:e.toFixed(a)},d="",b=0;if(Array.isArray(p))p.some(function(e){var t=Math.pow(y,e.expMax),r=n/t;return!(y<r||(d=e.units[i],b=l(r*o),0))});else{var v=Math.pow(y,p.expMax);d=p.units[i],b=l(n/v*o)}return c?{value:b,unit:d}:"".concat(b," ").concat(d)}},e.byteParse=function(e){},Object.defineProperty(e,"__esModule",{value:!0})});
